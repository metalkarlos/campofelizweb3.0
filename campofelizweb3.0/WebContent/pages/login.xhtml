<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	template="/WEB-INF/templates/template_others.xhtml">

	<ui:define name="head">
		<title>Administrador - Login</title>
		<meta name="robots" content="noindex" />
		
		<script type="text/javascript">
		$(document).ready(function() {
			//remueve todas las clases del boton primefaces
			$("#btnentrar").removeClass();
			
			//agrega las nuevas clases al boton
			$("#btnentrar").addClass("btn btn-default");
		});
		</script>
	</ui:define>

	<ui:define name="content_page">
		<!--start-content-->
		<div class="blog">
			<div class="container">
				<div class="blog-top">
					<div class="col-md-9 blog-grid">
						<h:form id="form-content" prependId="false">

							<div class="section-heading">
								<h2>Administración</h2>
								<div class="hr"></div>
							</div>

							<div class="blog-grid3">
								<p:focus for="txtusuario"></p:focus>
								<p:messages id="mensajes" showDetail="false"></p:messages>
								
								<div class=" blog-grid2">
									<p:panelGrid columns="1" layout="grid">	
										<h:outputLabel value="Usuario:" for="txtusuario" />
										<p:inputText id="txtusuario" value="#{usuarioBean.username}"
											required="true" requiredMessage="Ingrese Usuario"
											label="Usuario"></p:inputText>

										<h:outputLabel value="Clave:" for="txtclave" />
										<p:password id="txtclave" value="#{usuarioBean.password}"
											required="true" requiredMessage="Ingrese Clave" label="Clave"></p:password>

										<p:commandButton id="btnentrar" value="Entrar"
											action="#{usuarioBean.login()}"
											update=":form-content:mensajes"
											process=":form-content:txtusuario, :form-content:txtclave"></p:commandButton>
										<p:commandLink id="idOlvidoClave"
											value="Olvidé mi clave"></p:commandLink>
										<p:overlayPanel id="clavePanel" for="idOlvidoClave"
											hideEffect="fade" widgetVar="varClavePanel">
											<p:captcha id="idcaptcha" label="Captcha" required="true"
												requiredMessage="Ingrese el código captcha en el recuadro"
												language="es" />
											<p:commandLink id="lnkEnviar" styleClass="link"
												value="Enviar" action="#{usuarioBean.enviarOlvidoClave()}"
												update=":form-content:mensajes, :form-content:idcaptcha"
												process=":form-content:idcaptcha, @(input:not(:password))"
												onclick="varClavePanel.hide();"
												oncomplete="Recaptcha.reload();"></p:commandLink>
										</p:overlayPanel>
									</p:panelGrid>
								</div>
								<div class="clearfix"></div>
							</div>

							<p:ajaxStatus>
								<f:facet name="start">
									<table class="ajax-status" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td>
												<h:graphicImage alt="running.gif" library="images" name="running.gif" />
											</td>
										</tr>
									</table>
								</f:facet>
								<f:facet name="complete">
									<h:outputText value="" />
								</f:facet>
							</p:ajaxStatus>
							<p:idleMonitor timeout="#{session.maxInactiveInterval * 1000}" onidle="redirect(window.location);" />
						</h:form>
					</div>
				</div>
			</div>
		</div>
		<!--end-content-->
		
	</ui:define>
</ui:composition>