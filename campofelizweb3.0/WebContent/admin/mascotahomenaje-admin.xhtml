<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:html="http://xmlns.jcp.org/jsf/passthrough"
	template="/WEB-INF/templates/template_admin.xhtml"
	xmlns:my="http://xmlns.jcp.org/jsf/composite/components/buttons">

	<ui:define name="head">
		<meta name="robots" content="noindex" />
		<title>Administración - Homenaje Póstumo</title>
	</ui:define>

	<ui:define name="content_page">
	
		<!--start-content-->
		<div class="blog">
			<div class="container">
				<div class="blog-top">
					<div class="col-md-9 blog-grid">
						<div class="blog-grid3">
							<div class=" blog-grid2">
							
							
			<h:form id="form-contentpage" prependId="false">

				<div class="blog-header">
				<h2>Administración</h2>
				<h2>Homenaje Póstumo</h2>
				<div class="hr"></div>
				</div>

				<!-- <p:growl id="mensajes" showDetail="false" /> -->
				<p:messages id="mensajes" showDetail="false" />

				<div class="inner-content">
					<div class="grupo-admin">
					<div>
						<h:outputLabel value="Código" for="txtCodigo" />
					</div>
					<div>
						<h:outputText id="txtCodigo" value="#{mascotaHomenajeAdminBean.petmascotahomenaje.idmascota}"/>
					</div>
					</div>
								
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Fotos" for="idgalleria" />
						</div>
						<div>
							<p:dataGrid id="idgalleria"
								styleClass="nav-gallery col-md-12" var="imagen"
								value="#{mascotaHomenajeAdminBean.listpetfotomascota}"
								columns="3" rows="3" efect="true" paginator="true"
								paginatorPosition="bottom"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								emptyMessage="No se encontraron registros" lazy="true"
								layout="grid">


								<div class="col-md-12">
									<div class="thumbnail text-center">
											<p:graphicImage 
												value="#{parametro.servletImagenes}#{imagen.ruta}?w=800&amp;h=640&amp;m=both"
												styleClass="img-responsive" />
										<div class="caption-adoption">

											<p:inputTextarea id="txtObservacionFotoItem"
											value="#{imagen.descripcion}" maxlength="500"
											style="width: 100%;" />
											
											<!-- Buttons -->
											<p:commandButton id="idbuttonprincipal2" 
												title="#{imagen.idfotomascota}" onclick="vardialogprincipal.show()"
												icon="ui-icon ui-icon-person" update="idpanelprincipal" 
												>
												<f:setPropertyActionListener value="#{imagen}"
														target="#{mascotaHomenajeAdminBean.petfotomascotaselected}" />
											</p:commandButton>
											<p:commandButton id="idbuttondelete2"
												title="Eliminar foto permanentemente" onclick="vardialogdelete.show()"
												icon="ui-icon ui-icon-trash" update="idpaneldelete"
												>
												<f:setPropertyActionListener value="#{imagen}"
														target="#{mascotaHomenajeAdminBean.petfotomascotaselected}" />
											</p:commandButton>

										</div>
									</div>
								</div>
							</p:dataGrid>
						</div>
					</div>

					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Agregar Foto" for="idSubeFotos" />
						</div>
						<div>
							<p:panel id="pnlPrevia" styleClass="panel-previa">
								<p:graphicImage id="idfotoseleccionada"
									value="#{usuarioBean.streamedContent}" styleClass="img-responsive"
									rendered="#{mascotaHomenajeAdminBean.fotoSubida}" />
								<p:commandButton id="btnBorraFoto" icon="ui-icon ui-icon-trash"
									action="#{mascotaHomenajeAdminBean.borrarFotoSubida()}"
									update="pnlPrevia,pnlObservacionFoto,pnlObservacionFoto2"
									rendered="#{mascotaHomenajeAdminBean.fotoSubida}" />
							</p:panel>
							<p:fileUpload id="idSubeFotos"
								fileUploadListener="#{mascotaHomenajeAdminBean.handleFileUpload}"
								mode="advanced" cancelLabel="Cancelar" uploadLabel="Subir Foto"
								label="Elegir Foto" showButtons="false"
								update="mensajes, pnlPrevia,pnlObservacionFoto,pnlObservacionFoto2"
								allowTypes="/(\.|\/)(gif|jpe?g|png)$/" widgetVar="widgetVar" />
						</div>
					</div>
					
					<div class="grupo-admin">
						<div>
							<h:panelGroup id="pnlObservacionFoto">
								<h:outputLabel value="Descripción de la Foto"
									for="txtObservacionFoto" 
									rendered="#{mascotaHomenajeAdminBean.fotoSubida}" />
							</h:panelGroup>
						</div>
						<div>
							<h:panelGroup id="pnlObservacionFoto2">
								<p:inputTextarea id="txtObservacionFoto"
									value="#{mascotaHomenajeAdminBean.descripcionFoto}"
									maxlength="500" autoResize="false" style="width: 100%"
									rendered="#{mascotaHomenajeAdminBean.fotoSubida}" />
							</h:panelGroup>
						</div>
					</div>
					
					
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Código Veterinaria" for="txtCodigoVeterinaria" />
							<span style="color: red;">*</span>
						</div>
						<div>
							<p:inputText id="txtCodigoVeterinaria" maxlength="10"
									required="true" requiredMessage="Ingrese Código Veterinaria"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.idmascotaveterinaria}"
									style="width: 100%;" />
						</div>
					</div>
					
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Nombre" for="txtNombre" />
								<span style="color: red;">*</span>
						</div>
						<div>
							<p:inputText id="txtNombre" maxlength="100" required="true"
									requiredMessage="Ingrese Nombre"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.nombre}"
									style="width: 100%;  text-transform:uppercase;"></p:inputText>
						</div>
					</div>
					
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Especie" for="cmbEspeciemascota" />
								<span style="color: red;">*</span>
						</div>
						<div>
							<p:selectOneMenu id="cmbEspeciemascota" required="true"
									requiredMessage="Ingrese Especie"
									style="align: center;"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.petespecie.idespecie}">
									<f:selectItem itemLabel="Seleccione" itemValue="" />
									<f:selectItems value="#{petespecieBean.listPetespecie}"
										var="especie" itemLabel="#{especie.nombre}"
										itemValue="#{especie.idespecie}"></f:selectItems>
								</p:selectOneMenu>
						</div>
					</div>
					
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Fecha de Nacimiento"
									for="calFechaNacimiento" />
								<span style="color: red;">*</span>
						</div>
						<div>
							<p:calendar id="calFechaNacimiento" required="true"
									requiredMessage="Ingrese Fecha Nacimiento"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.fechanacimiento}"
									yearRange="c-110:c" locale="es" pattern="dd/MM/yyyy"
									navigator="true" />
						</div>
					</div>

					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Fecha de Fallecimiento" 
									for="calFechaFallecimiento" />
								<span style="color: red;">*</span>
						</div>
						<div>
							<p:calendar id="calFechaFallecimiento"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.fechafallecimiento}"
									yearRange="c-110:c" locale="es" pattern="dd/MM/yyyy"
									navigator="true" />
						</div>
					</div>
					
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Fecha de Publicación" for="calFechaPublicacion" />
						</div>
						<div>
							<p:calendar id="calFechaPublicacion"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.fechapublicacion}"
									yearRange="c-110:c" locale="es" pattern="dd/MM/yyyy"
									navigator="true" />
						</div>
					</div>
						
					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Dueño" for="txtFamilia" />
								<span style="color: red;">*</span>
						</div>
						<div>
							<p:inputText id="txtFamilia" maxlength="100" required="true"
									requiredMessage="Ingrese el Dueño"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.familia}"
									style="width: 100%; text-transform:uppercase;"></p:inputText>
						</div>
					</div>

					<div class="grupo-admin">
						<div>
							<h:outputLabel value="Dedicatoria" for="txtDedicatoria" />
						</div>
						<div>
							<p:editor id="txtDedicatoria" autoResize="true"
									value="#{mascotaHomenajeAdminBean.petmascotahomenaje.dedicatoria}"
									controls="bold italic underline  undo redo  cut copy  center  removeformat" />
						</div>
					</div>
				</div>
				<div class="area-botones">
					<my:buttons renderedButtonAceptar="true"
						labelButtonAceptar="Grabar"
						onclickButtonAceptar="vardialoggrabar.show()"
						immediateButtonAceptar="true"
						renderedButtonEliminar="#{mascotaHomenajeAdminBean.idmascota > 0}"
						onclickButtonEliminar="vardialogdeletemascota.show()"
						immediateButtonEliminar="true" renderedButtonCancelar="true"
						labelButtonCancelar="Cancelar"
						onclickButtonCancelar="redirect('../pages/mascotashomenaje.jsf');"
						renderedButtonNewItem="false" />
				</div>
				<p:dialog id="iddialogprincipal" header="Foto Principal"
					closable="true" widgetVar="vardialogprincipal" modal="true"
					style="min-height: 80px; max-width: 450px">
					<h:panelGrid id="idpanelprincipal" columns="1" width="100%">
						<h:column>
						<p:graphicImage
							value="#{parametro.servletImagenes}#{mascotaHomenajeAdminBean.petfotomascotaselected.ruta}"
							style="max-height: 50px" />
						<h:outputText id="idlabelprincipal"
							value="¿Seleccionar imágen como foto principal?" />
						</h:column>
						<h:column>
						<div style="text-align: right;">
							<p:commandButton id="idconfirmarprincipal" value="Confirmar"
								action="#{mascotaHomenajeAdminBean.ponerFotoperfil()}"
								onclick="vardialogprincipal.hide()"
								update="mensajes" />
							<p:commandButton id="idcancelarprincipal" value="Cancelar"
								onclick="vardialogprincipal.hide()" immediate="true" />
						</div>
						</h:column>
					</h:panelGrid>
				</p:dialog>

				<p:dialog id="iddialogdelete" header="Eliminar Foto" closable="true"
					widgetVar="vardialogdelete" modal="true"
					style="min-height: 80px; max-width: 450px">
					<h:panelGrid id="idpaneldelete" columns="1" width="100%">
						<h:column >
						<p:graphicImage
							value="#{parametro.servletImagenes}#{mascotaHomenajeAdminBean.petfotomascotaselected.ruta}"
							style="max-height: 50px" />
						<h:outputText id="idlabeldelete" value="¿Quitar foto?" />
						</h:column>
						<h:column >
						<div style="text-align: right;">
						<p:commandButton id="idconfirmardelete" value="Confirmar"
							action="#{mascotaHomenajeAdminBean.quitarFoto()}"
							onclick="vardialogdelete.hide()"
							update="mensajes, idgalleria" />
						<p:commandButton id="idcancelardelete" value="Cancelar"
							onclick="vardialogdelete.hide()" immediate="true" />
						</div>
						</h:column>
					</h:panelGrid>
				</p:dialog>

				<p:dialog id="iddialoggrabar" header="Grabar" closable="true"
					widgetVar="vardialoggrabar" modal="true"
					style="min-height: 80px; max-width: 450px">
					<div>
						<h:outputText id="idlabelgrabar"
							value="Confirme si desea grabar el registro" />
					</div>
					<div style="text-align: right;">
						<p:commandButton id="idconfirmargrabar" value="Confirmar"
							action="#{mascotaHomenajeAdminBean.grabar()}"
							onclick="vardialoggrabar.hide()"
							update="mensajes,txtCodigoVeterinaria,txtNombre,cmbEspeciemascota,calFechaNacimiento,txtFamilia" />
						<p:commandButton id="idcancelargrabar" value="Cancelar"
							onclick="vardialoggrabar.hide()" immediate="true" />
					</div>
				</p:dialog>

				<p:dialog id="iddialogdeletemascota" header="Eliminar Mascota"
					closable="true" widgetVar="vardialogdeletemascota" modal="true"
					style="min-height: 80px; max-width: 450px">
					<div>
						<h:outputText id="idlabeldeletemascota"
							value="Confirme si desea eliminar el registro" />
					</div>
					<div style="text-align: right;">
						<p:commandButton id="idconfirmardeletemascota"
							value="Confirmar"
							action="#{mascotaHomenajeAdminBean.eliminar()}"
							onclick="vardialogdeletemascota.hide()"
							update="mensajes" />
						<p:commandButton id="idcancelardeletenmascota" value="Cancelar"
							onclick="vardialogdeletemascota.hide()" immediate="true" />
					</div>
				</p:dialog>

			</h:form>
			
			
							</div>
							<div class="clearfix"></div>
							<div class="text-center">
								<h:link styleClass="btn btn-default" outcome="/pages/mascotashomenaje" value="Ver Más Homenajes" ></h:link>
							</div>
						</div>
					</div>
					<div class="clearfix"></div>
				</div>

			</div>
		</div>
		<!--end-content-->
			
	</ui:define>
</ui:composition>